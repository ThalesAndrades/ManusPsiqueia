graph TD
    subgraph "Ambiente Local"
        direction LR
        A[1. secrets.template] --> B{2. Preencher .secrets}
        B --> C[3. secrets_manager.sh]
        C --> D[4. Keychain Local]
        C --> E[5. .xcconfig]
        E --> F[App Debug]
    end

    subgraph "CI/CD GitHub Actions"
        direction TB
        G[6. GitHub Secrets] --> H{7. Workflow CI/CD}
        H --> I[8. Injetar Segredos no Build]
        I --> J[App Staging/Produção]
    end

    subgraph "Ambiente de Produção"
        direction TB
        J --> K[9. App Store]
        K --> L[10. Dispositivo do Usuário]
        L --> M{11. Keychain Dispositivo}
    end

    style A fill:#f0f0f0,stroke:#555,stroke-width:2px,stroke-dasharray: 5 5
    style B fill:#fff0b3,stroke:#555,stroke-width:2px
    style C fill:#d4edda,stroke:#333,stroke-width:2px
    style D fill:#cce5ff,stroke:#333,stroke-width:2px
    style E fill:#cce5ff,stroke:#333,stroke-width:2px
    style F fill:#cce5ff,stroke:#333,stroke-width:2px
    style G fill:#f8d7da,stroke:#333,stroke-width:2px
    style H fill:#e2e3e5,stroke:#333,stroke-width:2px
    style I fill:#e2e3e5,stroke:#333,stroke-width:2px
    style J fill:#d4edda,stroke:#333,stroke-width:2px
    style K fill:#f0f0f0,stroke:#555,stroke-width:2px
    style L fill:#cce5ff,stroke:#333,stroke-width:2px
    style M fill:#cce5ff,stroke:#333,stroke-width:2px
